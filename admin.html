<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Consignment Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="flex flex-col min-h-screen bg-gray-100">

    <header class="app-header mx-auto max-w-screen-lg w-full px-4 sm:px-6 lg:px-8 py-3 md:py-4 rounded-t-2xl md:rounded-t-xl md:mt-8">
        <div class="flex flex-col md:flex-row justify-between md:items-center h-full">
            <div>
                <h1 class="text-2xl font-bold">ConsignTracker - Admin Panel</h1>
                <p class="text-blue-200 mt-1 text-xs">Publish or unpublish sales reports for online viewing.</p>
            </div>
            <div class="version-number mt-3 md:mt-0 self-end text-right md:self-auto md:text-left">
                <button id="logoutButton" class="text-white hover:text-red-300 transition-colors font-medium text-sm">
                    <i class="fas fa-sign-out-alt mr-1"></i>Logout
                </button>
            </div>
        </div>
    </header>

    <main id="mainContent" class="flex-grow w-full flex flex-col">
        <div class="page-content-wrapper mx-auto max-w-screen-lg w-full bg-white shadow-xl flex-grow rounded-none p-4">
            <!-- Search Section -->
            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                <h2 class="text-lg font-semibold text-gray-800 mb-1">Manage Publication Status</h2>
                <p class="text-gray-600 mb-3 text-xs">Enter a Consignment Order (CO) number or company name to search.</p>
                <div class="search-input-container">
                    <i class="fas fa-search search-icon-left"></i>
                    <input type="text" id="coSearchInput" placeholder="Search by CO Number, Company, SR ID..."
                           class="w-full p-2 focus:outline-none text-gray-700 text-sm bg-transparent">
                    <div class="search-icons-right">
                        <button id="clearSearchButton" class="search-clear-button hidden" title="Clear search">
                            <i class="fas fa-times-circle"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Message Box -->
            <div id="adminMessageBox" class="mt-4 p-4 rounded-md hidden"></div>

            <!-- Results Section -->
            <div id="reportsContainer" class="mt-6 hidden">
                <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-3 border-b pb-3 gap-3">
                    <h3 id="reportsHeader" class="text-base font-semibold text-gray-700"></h3>
                    <div class="flex gap-2 flex-wrap">
                        <button id="publishSelectedBtn" class="bg-green-500 text-white font-bold py-1.5 px-3 rounded-lg hover:bg-green-600 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-xs">
                            <i class="fas fa-check-circle mr-2"></i>Publish
                        </button>
                        <button id="unpublishSelectedBtn" class="bg-red-500 text-white font-bold py-1.5 px-3 rounded-lg hover:bg-red-600 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-xs">
                            <i class="fas fa-times-circle mr-2"></i>Unpublish
                        </button>
                        <button id="notifySupplierBtn" class="bg-yellow-500 text-white font-bold py-1.5 px-3 rounded-lg hover:bg-yellow-600 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-xs">
                            <i class="fas fa-envelope mr-2"></i>Notify Supplier
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table id="adminReportsTable" class="min-w-full bg-white">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="w-1/12 px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Select</th>
                                <th class="w-2/12 px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">SR ID</th>
                                <th class="w-4/12 px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item Description</th>
                                <th class="w-2/12 px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Invoice No.</th>
                                <th class="w-2/12 px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Voucher No.</th>
                                <th class="w-1/12 px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            </tr>
                        </thead>
                        <tbody id="reportsTableBody" class="bg-white divide-y divide-gray-200">
                            <!-- Rows will be inserted here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <footer class="app-footer mx-auto max-w-screen-lg w-full px-4 sm:px-6 lg:px-8 py-4 md:py-6 text-center rounded-b-2xl md:rounded-b-xl md:mb-8">
        <div class="px-4 sm:px-6 lg:px-8">
            <p class="copyright">&copy; 2025 ConsignTracker Admin. All rights reserved.</p>
        </div>
    </footer>
    
    <!-- Email Modal -->
    <div id="emailModalOverlay" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 500px; min-height: auto;">
            <div class="modal-header" style="padding-bottom: 0.5rem; margin-bottom: 1rem;">
                <h2 class="text-lg font-bold">Notify Supplier</h2>
                <button class="modal-close-button" id="closeEmailModalButton">&times;</button>
            </div>
            <div class="modal-body p-0">
                <form id="emailForm">
                    <div class="mb-3">
                        <label for="recipientEmail" class="block text-sm font-medium text-gray-700">Recipient Email</label>
                        <input type="email" id="recipientEmail" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div class="mb-3">
                        <label for="emailSubject" class="block text-sm font-medium text-gray-700">Subject</label>
                        <input type="text" id="emailSubject" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="border-top: none; padding-top: 1rem; margin-top: 0;">
                <button id="sendEmailBtn" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors shadow w-full text-sm">
                    Send Notification
                </button>
            </div>
        </div>
    </div>

    <div id="suggestionsList" class="hidden"></div>
    <script src="admin.js"></script>
</body>
</html>
